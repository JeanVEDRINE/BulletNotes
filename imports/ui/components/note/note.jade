template(name='note')
  li.note-item(class='{{className}}',id="menuItem_{{_id}}",data-id="{{_id}}")
    .noteContainer
      .options.pull-left
        a(href='#',class='glyphicon expand {{expandClass}}')
        if currentUser
          if userOwnsNote
            a.handle.glyphicon.glyphicon-option-vertical(href='/note/{{_id}}')
          else
            a.handle.glyphicon.glyphicon-option-vertical(href='/note/{{_id}}/{{shareKey}}')
          ul.dropdown-menu
            li
              a.share(href='#', data-toggle='modal', data-target='#share_{{_id}}')
                i.glyphicon.glyphicon-share
                |  Share
            li
              a.duplicate(href='#')
                i.glyphicon.glyphicon-duplicate
                |  Duplicate
            //- li
              a.calendar(href='/calendar/{{_id}}')
                i.glyphicon.glyphicon-calendar
                |  Calendar
            li
              a.delete(href='#')
                i.glyphicon.glyphicon-trash
                |  Delete
      .pull-right(class='{{favoriteClass}}')
        if currentUser
          i.glyphicon.glyphicon-heart.favorite
        if this.children
          span.badge {{this.children}}
      .note-title
        div(class='title task-title-sp', contenteditable='true') {{{title}}} {{progress}}
        if progress
          .progress.progress-striped(data-toggle="tooltip", data-placement="top", title="{{progress}}% Complete")
            .progress-bar(class='progress-bar-{{progressClass}}' role='progressbar', aria-valuenow='{{progress}}', aria-valuemin='0', aria-valuemax='100', style='width: {{progress}}%')
              span.sr-only {{progress}}% Complete (success)
        p.body(contenteditable='true',style='display:none') {{body}}
    +share
    if children
      ol
        each children
          +note
